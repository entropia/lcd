diff -Nru gnuboy-1.0.3/Makefile.in gnuboy-1.0.3-lcd/Makefile.in
--- gnuboy-1.0.3/Makefile.in	Tue Jul  3 18:31:18 2001
+++ gnuboy-1.0.3-lcd/Makefile.in	Sun Dec 30 02:09:08 2001
@@ -30,7 +30,7 @@
 SDL_LIBS = @SDL_LIBS@
 SDL_CFLAGS = @SDL_CFLAGS@
 
-X11_OBJS = sys/x11/xlib.o sys/x11/keymap.o @JOY@ @SOUND@
+X11_OBJS = sys/x11/xlib.o sys/x11/keymap.o @JOY@ @SOUND@ sys/x11/output.o
 X11_LIBS = @XLIBS@ -lX11 -lXext
 
 all: $(TARGETS)
@@ -51,6 +51,9 @@
 
 sys/sdl/keymap.o: sys/sdl/keymap.c
 	$(MYCC) $(SDL_CFLAGS) -c $< -o $@
+
+sys/x11/output.o: sys/x11/output.c
+	$(MYCC)  -c $< -o $@
 
 xgnuboy: $(OBJS) $(SYS_OBJS) $(X11_OBJS)
 	$(LD) $(LDFLAGS) $(OBJS) $(SYS_OBJS) $(X11_OBJS) -o $@ $(X11_LIBS)
diff -Nru gnuboy-1.0.3/sys/x11/font.h gnuboy-1.0.3-lcd/sys/x11/font.h
--- gnuboy-1.0.3/sys/x11/font.h	Thu Jan  1 01:00:00 1970
+++ gnuboy-1.0.3-lcd/sys/x11/font.h	Sun Dec 30 02:09:07 2001
@@ -0,0 +1,128 @@
+0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x24,0x42,0x81,0xe7,0x24,0x24,0x3c,
+0x3c,0x24,0x24,0xe7,0x81,0x42,0x24,0x18,0x18,0x14,0xf2,0x81,0x81,0xf2,0x14,0x18,
+0x18,0x28,0x4f,0x81,0x81,0x4f,0x28,0x18,0xff,0x81,0x81,0x81,0x81,0x81,0x81,0xff,
+0xf8,0x88,0x8f,0x89,0xf9,0x41,0x41,0x7f,0xff,0x89,0x89,0x89,0xf9,0x81,0x81,0xff,
+0x01,0x03,0x06,0x8c,0xd8,0x70,0x20,0x00,0x7e,0xc3,0xd3,0xd3,0xdb,0xc3,0xc3,0x7e,
+0x18,0x3c,0x2c,0x2c,0x7e,0x18,0x18,0x00,0x10,0x1c,0x12,0x10,0x10,0x70,0xf0,0x60,
+0xf0,0xc0,0xfe,0xd8,0xde,0x18,0x18,0x00,0x70,0xc8,0xde,0xdb,0xdb,0x7e,0x1b,0x1b,
+0x00,0x00,0x00,0xff,0xff,0xff,0x00,0x00,0x1c,0x1c,0x1c,0x1c,0x1c,0x1c,0x1c,0x1c,
+0x7c,0xc6,0xc6,0x00,0xc6,0xc6,0x7c,0x00,0x06,0x06,0x06,0x00,0x06,0x06,0x06,0x00,
+0x7c,0x06,0x06,0x7c,0xc0,0xc0,0x7c,0x00,0x7c,0x06,0x06,0x7c,0x06,0x06,0x7c,0x00,
+0xc6,0xc6,0xc6,0x7c,0x06,0x06,0x06,0x00,0x7c,0xc0,0xc0,0x7c,0x06,0x06,0x7c,0x00,
+0x7c,0xc0,0xc0,0x7c,0xc6,0xc6,0x7c,0x00,0x7c,0x06,0x06,0x00,0x06,0x06,0x06,0x00,
+0x7c,0xc6,0xc6,0x7c,0xc6,0xc6,0x7c,0x00,0x7c,0xc6,0xc6,0x7c,0x06,0x06,0x7c,0x00,
+0x00,0x3c,0x46,0x06,0x7e,0x66,0x3c,0x00,0x78,0x66,0x7d,0x64,0x7e,0x03,0x0b,0x06,
+0x00,0x00,0x00,0x1f,0x1f,0x1f,0x1c,0x1c,0x00,0x00,0x00,0xfc,0xfc,0xfc,0x1c,0x1c,
+0x1c,0x1c,0x1c,0x1f,0x1f,0x1f,0x00,0x00,0x1c,0x1c,0x1c,0xfc,0xfc,0xfc,0x00,0x00,
+0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x18,0x18,0x00,0x18,0x00,
+0x66,0x66,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x24,0x7e,0x24,0x24,0x7e,0x24,0x00,
+0x14,0x3e,0x55,0x3c,0x1e,0x55,0x3e,0x14,0x62,0x66,0x0c,0x18,0x30,0x66,0x46,0x00,
+0x78,0xcc,0x61,0xce,0xcc,0xcc,0x78,0x00,0x18,0x18,0x10,0x00,0x00,0x00,0x00,0x00,
+0x04,0x08,0x18,0x18,0x18,0x18,0x08,0x04,0x20,0x10,0x18,0x18,0x18,0x18,0x10,0x20,
+0x00,0x54,0x38,0xfe,0x38,0x54,0x00,0x00,0x00,0x18,0x18,0x7e,0x18,0x18,0x00,0x00,
+0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x20,0x00,0x00,0x00,0x3c,0x00,0x00,0x00,0x00,
+0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x03,0x06,0x0c,0x18,0x30,0x60,0xc0,0x00,
+0x3c,0x66,0x6e,0x76,0x66,0x66,0x3c,0x00,0x18,0x38,0x18,0x18,0x18,0x18,0x18,0x00,
+0x3c,0x66,0x0e,0x1c,0x38,0x70,0x7e,0x00,0x7e,0x0c,0x18,0x3c,0x06,0x46,0x3c,0x00,
+0x0c,0x1c,0x2c,0x4c,0x7e,0x0c,0x0c,0x00,0x7e,0x60,0x7c,0x06,0x06,0x46,0x3c,0x00,
+0x1c,0x20,0x60,0x7c,0x66,0x66,0x3c,0x00,0x7e,0x06,0x0e,0x1c,0x18,0x18,0x18,0x00,
+0x3c,0x66,0x66,0x3c,0x66,0x66,0x3c,0x00,0x3c,0x66,0x66,0x3e,0x06,0x0c,0x38,0x00,
+0x00,0x18,0x18,0x00,0x00,0x18,0x18,0x00,0x00,0x18,0x18,0x00,0x18,0x18,0x10,0x00,
+0x06,0x0c,0x18,0x30,0x18,0x0c,0x06,0x00,0x00,0x00,0x3c,0x00,0x00,0x3c,0x00,0x00,
+0x60,0x30,0x18,0x0c,0x18,0x30,0x60,0x00,0x3c,0x46,0x06,0x0c,0x18,0x18,0x00,0x18,
+0x3c,0x66,0x6e,0x6a,0x6e,0x60,0x3c,0x00,0x3c,0x66,0x66,0x7e,0x66,0x66,0x66,0x00,
+0x7c,0x66,0x66,0x7c,0x66,0x66,0x7c,0x00,0x3c,0x62,0x60,0x60,0x60,0x62,0x3c,0x00,
+0x7c,0x66,0x66,0x66,0x66,0x66,0x7c,0x00,0x7e,0x60,0x60,0x7c,0x60,0x60,0x7e,0x00,
+0x7e,0x60,0x60,0x7c,0x60,0x60,0x60,0x00,0x3c,0x62,0x60,0x6e,0x66,0x66,0x3e,0x00,
+0x66,0x66,0x66,0x7e,0x66,0x66,0x66,0x00,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x00,
+0x06,0x06,0x06,0x06,0x06,0x46,0x3c,0x00,0x66,0x6c,0x78,0x70,0x78,0x6c,0x66,0x00,
+0x60,0x60,0x60,0x60,0x60,0x60,0x7c,0x00,0xfc,0xd6,0xd6,0xd6,0xd6,0xc6,0xc6,0x00,
+0x62,0x72,0x7a,0x5e,0x4e,0x46,0x42,0x00,0x3c,0x66,0x66,0x66,0x66,0x66,0x3c,0x00,
+0x7c,0x66,0x66,0x7c,0x60,0x60,0x60,0x00,0x3c,0x66,0x66,0x66,0x66,0x66,0x3c,0x06,
+0x7c,0x66,0x66,0x7c,0x66,0x66,0x66,0x00,0x3c,0x62,0x70,0x3c,0x0e,0x46,0x3c,0x00,
+0x7e,0x18,0x18,0x18,0x18,0x18,0x18,0x00,0x66,0x66,0x66,0x66,0x66,0x66,0x3c,0x00,
+0x66,0x66,0x66,0x66,0x66,0x64,0x78,0x00,0xc6,0xc6,0xc6,0xd6,0xd6,0xd6,0xfc,0x00,
+0x66,0x66,0x66,0x3c,0x66,0x66,0x66,0x00,0x66,0x66,0x66,0x3c,0x18,0x18,0x18,0x00,
+0x7e,0x0e,0x1c,0x38,0x70,0x60,0x7e,0x00,0x1e,0x18,0x18,0x18,0x18,0x18,0x1e,0x00,
+0x40,0x60,0x30,0x18,0x0c,0x06,0x02,0x00,0x78,0x18,0x18,0x18,0x18,0x18,0x78,0x00,
+0x10,0x38,0x6c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7e,0x00,
+0x00,0xc0,0xc0,0x60,0x00,0x00,0x00,0x00,0x00,0x3c,0x46,0x3e,0x66,0x66,0x3e,0x00,
+0x60,0x7c,0x66,0x66,0x66,0x66,0x7c,0x00,0x00,0x3c,0x62,0x60,0x60,0x62,0x3c,0x00,
+0x06,0x3e,0x66,0x66,0x66,0x66,0x3e,0x00,0x00,0x3c,0x66,0x7e,0x60,0x62,0x3c,0x00,
+0x1e,0x30,0x7c,0x30,0x30,0x30,0x30,0x00,0x00,0x3e,0x66,0x66,0x66,0x3e,0x46,0x3c,
+0x60,0x7c,0x66,0x66,0x66,0x66,0x66,0x00,0x18,0x00,0x18,0x18,0x18,0x18,0x18,0x00,
+0x00,0x08,0x18,0x18,0x18,0x18,0x58,0x30,0x60,0x64,0x68,0x70,0x78,0x6c,0x66,0x00,
+0x18,0x18,0x18,0x18,0x18,0x18,0x0c,0x00,0x00,0xfc,0xd6,0xd6,0xd6,0xd6,0xc6,0x00,
+0x00,0x7c,0x66,0x66,0x66,0x66,0x66,0x00,0x00,0x3c,0x66,0x66,0x66,0x66,0x3c,0x00,
+0x00,0x7c,0x66,0x66,0x66,0x7c,0x60,0x60,0x00,0x3e,0x66,0x66,0x66,0x66,0x3e,0x06,
+0x00,0x6c,0x70,0x60,0x60,0x60,0x60,0x00,0x00,0x3c,0x72,0x38,0x1c,0x4e,0x3c,0x00,
+0x18,0x3c,0x18,0x18,0x18,0x18,0x0c,0x00,0x00,0x66,0x66,0x66,0x66,0x66,0x3e,0x00,
+0x00,0x66,0x66,0x66,0x66,0x64,0x78,0x00,0x00,0xc6,0xc6,0xd6,0xd6,0xd6,0xfc,0x00,
+0x00,0x66,0x66,0x3c,0x66,0x66,0x66,0x00,0x00,0x66,0x66,0x66,0x26,0x1e,0x46,0x3c,
+0x00,0x7e,0x0e,0x1c,0x38,0x70,0x7e,0x00,0x0e,0x18,0x18,0x30,0x18,0x18,0x0e,0x00,
+0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x70,0x18,0x18,0x0c,0x18,0x18,0x70,0x00,
+0x00,0x60,0xf2,0x9e,0x0c,0x00,0x00,0x00,0x10,0x10,0x28,0x28,0x44,0x44,0x82,0xfe,
+0x3c,0x62,0x60,0x60,0x60,0x62,0x1c,0x30,0x24,0x00,0x66,0x66,0x66,0x66,0x3e,0x00,
+0x0c,0x18,0x00,0x3c,0x7e,0x60,0x3c,0x00,0x18,0x66,0x00,0x3c,0x06,0x7e,0x3e,0x00,
+0x24,0x00,0x3c,0x46,0x3e,0x46,0x3e,0x00,0x30,0x18,0x00,0x3c,0x06,0x7e,0x3e,0x00,
+0x18,0x18,0x00,0x3c,0x06,0x7e,0x3e,0x00,0x00,0x3c,0x62,0x60,0x62,0x3c,0x08,0x18,
+0x18,0x34,0x00,0x3c,0x7e,0x60,0x3e,0x00,0x24,0x00,0x3c,0x66,0x7e,0x60,0x3e,0x00,
+0x30,0x18,0x00,0x3c,0x7e,0x60,0x3c,0x00,0x24,0x00,0x18,0x18,0x18,0x18,0x18,0x00,
+0x18,0x24,0x00,0x18,0x18,0x18,0x18,0x00,0x10,0x08,0x00,0x18,0x18,0x18,0x18,0x00,
+0x24,0x00,0x3c,0x66,0x7e,0x66,0x66,0x00,0x18,0x00,0x3c,0x66,0x7e,0x66,0x66,0x00,
+0x0c,0x18,0x7e,0x60,0x7c,0x60,0x7e,0x00,0x00,0x00,0x7e,0x1b,0x7f,0xd8,0x7e,0x00,
+0x3f,0x78,0xd8,0xde,0xf8,0xd8,0xdf,0x00,0x18,0x34,0x00,0x3c,0x66,0x66,0x3c,0x00,
+0x24,0x00,0x3c,0x66,0x66,0x66,0x3c,0x00,0x30,0x18,0x00,0x3c,0x66,0x66,0x3c,0x00,
+0x18,0x24,0x00,0x66,0x66,0x66,0x3c,0x00,0x30,0x18,0x00,0x66,0x66,0x66,0x3c,0x00,
+0x66,0x00,0x66,0x66,0x66,0x3e,0x46,0x3c,0x66,0x00,0x3c,0x66,0x66,0x66,0x3c,0x00,
+0x66,0x00,0x66,0x66,0x66,0x66,0x3c,0x00,0x18,0x3c,0x62,0x60,0x60,0x62,0x3c,0x18,
+0x1c,0x3a,0x30,0x7c,0x30,0x30,0x7e,0x00,0x66,0x66,0x3c,0x18,0x3c,0x18,0x18,0x00,
+0x3c,0x66,0x66,0x6c,0x66,0x66,0xec,0x00,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,
+0x0c,0x18,0x00,0x3c,0x06,0x7e,0x3e,0x00,0x0c,0x18,0x00,0x18,0x18,0x18,0x18,0x00,
+0x0c,0x18,0x00,0x3c,0x66,0x66,0x3c,0x00,0x0c,0x18,0x00,0x66,0x66,0x66,0x3e,0x00,
+0x34,0x58,0x00,0x7c,0x66,0x66,0x66,0x00,0x1a,0x2c,0x62,0x72,0x5a,0x4e,0x46,0x00,
+0x00,0x3c,0x46,0x3e,0x66,0x3e,0x00,0x7e,0x00,0x3c,0x66,0x66,0x66,0x3c,0x00,0x7e,
+0x00,0x18,0x00,0x18,0x30,0x60,0x66,0x3c,0x00,0x00,0x00,0x3e,0x30,0x30,0x30,0x00,
+0x00,0x00,0x00,0x7c,0x0c,0x0c,0x0c,0x00,0x62,0xe4,0x68,0x76,0x2b,0x43,0x86,0x0f,
+0x62,0xe4,0x68,0x76,0x2e,0x56,0x9f,0x06,0x00,0x18,0x00,0x18,0x18,0x18,0x18,0x18,
+0x1b,0x36,0x6c,0xd8,0x6c,0x36,0x1b,0x00,0xd8,0x6c,0x36,0x1b,0x36,0x6c,0xd8,0x00,
+0x34,0x58,0x00,0x3c,0x06,0x7e,0x3e,0x00,0x34,0x58,0x00,0x3c,0x66,0x66,0x3c,0x00,
+0x02,0x3c,0x66,0x6e,0x76,0x66,0x3c,0x40,0x00,0x02,0x3c,0x6e,0x76,0x66,0x3c,0x40,
+0x00,0x00,0x7e,0xdb,0xde,0xd8,0x7f,0x00,0x00,0x7e,0xd8,0xd8,0xfc,0xd8,0xd8,0xde,
+0x20,0x10,0x3c,0x66,0x66,0x7e,0x66,0x66,0x34,0x58,0x3c,0x66,0x66,0x7e,0x66,0x66,
+0x34,0x58,0x3c,0x66,0x66,0x66,0x66,0x3c,0x66,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
+0x0c,0x18,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x38,0x10,0x10,0x10,0x00,0x00,
+0x7a,0xca,0xca,0xca,0x7a,0x0a,0x0a,0x0a,0x3c,0x42,0x99,0xb5,0xb1,0x9d,0x42,0x3c,
+0x3c,0x42,0xb9,0xb5,0xb9,0xb5,0x42,0x3c,0xf1,0x5b,0x55,0x51,0x51,0x00,0x00,0x00,
+0x66,0x00,0xe6,0x66,0x66,0xf6,0x06,0x1c,0xf6,0x66,0x66,0x66,0x66,0xf6,0x06,0x1c,
+0x00,0x66,0x76,0x3c,0x6e,0x66,0x00,0x00,0x00,0x7c,0x0c,0x0c,0x0c,0x7e,0x00,0x00,
+0x00,0x1e,0x06,0x0e,0x1e,0x36,0x00,0x00,0x00,0x7e,0x0c,0x0c,0x0c,0x0c,0x00,0x00,
+0x00,0x7c,0x06,0x66,0x66,0x66,0x00,0x00,0x00,0x1c,0x0c,0x0c,0x0c,0x0c,0x00,0x00,
+0x00,0x1e,0x0c,0x06,0x06,0x06,0x00,0x00,0x00,0x7e,0x36,0x36,0x36,0x36,0x00,0x00,
+0x60,0x6e,0x66,0x66,0x66,0x7e,0x00,0x00,0x00,0x3c,0x0c,0x0c,0x00,0x00,0x00,0x00,
+0x00,0x3e,0x06,0x06,0x06,0x3e,0x00,0x00,0x60,0x7e,0x06,0x06,0x06,0x0e,0x00,0x00,
+0x00,0x6c,0x3e,0x66,0x66,0x6e,0x00,0x00,0x00,0x1c,0x0c,0x0c,0x0c,0x3c,0x00,0x00,
+0x00,0x3e,0x36,0x36,0x36,0x1c,0x00,0x00,0x00,0x36,0x36,0x36,0x36,0x7e,0x00,0x00,
+0x00,0x7e,0x66,0x76,0x06,0x7e,0x00,0x00,0x00,0x66,0x66,0x3c,0x0e,0x7e,0x00,0x00,
+0x00,0x3e,0x06,0x36,0x36,0x34,0x30,0x00,0x00,0x78,0x0c,0x0c,0x0c,0x0c,0x00,0x00,
+0x00,0xd6,0xd6,0xd6,0xd6,0xfe,0x00,0x00,0x00,0x7c,0x6c,0x6c,0x6c,0xec,0x00,0x00,
+0x00,0x1c,0x0c,0x0c,0x0c,0x0c,0x0c,0x00,0x00,0x3e,0x06,0x06,0x06,0x06,0x06,0x00,
+0x00,0xfe,0x66,0x66,0x66,0x7e,0x00,0x00,0x00,0x7e,0x66,0x76,0x06,0x06,0x06,0x00,
+0x00,0x36,0x36,0x1c,0x0c,0x0c,0x0c,0x00,0x1c,0x32,0x3c,0x66,0x66,0x3c,0x4c,0x38,
+0x00,0x10,0x38,0x6c,0xc6,0x82,0x00,0x00,0x66,0xf7,0x99,0x99,0xef,0x66,0x00,0x00,
+0x00,0x00,0x76,0xdc,0xc8,0xdc,0x76,0x00,0x1c,0x36,0x66,0x7c,0x66,0x66,0x7c,0x60,
+0x00,0xfe,0x66,0x62,0x60,0x60,0x60,0xf8,0x00,0x00,0xfe,0x6c,0x6c,0x6c,0x6c,0x48,
+0xfe,0x66,0x30,0x18,0x30,0x66,0xfe,0x00,0x00,0x1e,0x38,0x6c,0x6c,0x6c,0x38,0x00,
+0x00,0x00,0x6c,0x6c,0x6c,0x6c,0x7f,0xc0,0x00,0x00,0x7e,0x18,0x18,0x18,0x18,0x10,
+0x3c,0x18,0x3c,0x66,0x66,0x3c,0x18,0x3c,0x00,0x3c,0x66,0x7e,0x66,0x66,0x3c,0x00,
+0x00,0x3c,0x66,0x66,0x66,0x24,0x66,0x00,0x1c,0x36,0x78,0xdc,0xcc,0xec,0x78,0x00,
+0x0c,0x18,0x38,0x54,0x54,0x38,0x30,0x60,0x00,0x10,0x7c,0xd6,0xd6,0xd6,0x7c,0x10,
+0x3e,0x70,0x60,0x7e,0x60,0x70,0x3e,0x00,0x3c,0x66,0x66,0x66,0x66,0x66,0x66,0x00,
+0x00,0x7e,0x00,0x7e,0x00,0x7e,0x00,0x00,0x18,0x18,0x7e,0x18,0x18,0x00,0x7e,0x00,
+0x30,0x18,0x0c,0x18,0x30,0x00,0x7e,0x00,0x0c,0x18,0x30,0x18,0x0c,0x00,0x7e,0x00,
+0x00,0x0e,0x1b,0x1b,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0xd8,0xd8,0x70,0x00,
+0x18,0x18,0x00,0x7e,0x00,0x18,0x18,0x00,0x00,0x32,0x4c,0x00,0x32,0x4c,0x00,0x00,
+0x38,0x6c,0x38,0x00,0x00,0x00,0x00,0x00,0x38,0x7c,0x38,0x00,0x00,0x00,0x00,0x00,
+0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x0f,0x18,0xd8,0x70,0x30,0x00,
+0x38,0x6c,0x6c,0x6c,0x6c,0x00,0x00,0x00,0x38,0x6c,0x18,0x30,0x7c,0x00,0x00,0x00,
+0x78,0x0c,0x38,0x0c,0x78,0x00,0x00,0x00,0x00,0xfe,0x00,0x00,0x00,0x00,0x00,0x00
diff -Nru gnuboy-1.0.3/sys/x11/lcd.h gnuboy-1.0.3-lcd/sys/x11/lcd.h
--- gnuboy-1.0.3/sys/x11/lcd.h	Thu Jan  1 01:00:00 1970
+++ gnuboy-1.0.3-lcd/sys/x11/lcd.h	Sun Dec 30 02:09:07 2001
@@ -0,0 +1,5 @@
+#define DEVICE "/dev/lcd0"
+#define BANKS 8
+#define XSIZE (105)
+#define YSIZE (BANKS*8)
+
diff -Nru gnuboy-1.0.3/sys/x11/output.c gnuboy-1.0.3-lcd/sys/x11/output.c
--- gnuboy-1.0.3/sys/x11/output.c	Thu Jan  1 01:00:00 1970
+++ gnuboy-1.0.3-lcd/sys/x11/output.c	Sun Dec 30 02:09:07 2001
@@ -0,0 +1,134 @@
+#include <unistd.h>
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+#include <string.h>
+#include <stdio.h>
+
+#include "output.h"
+
+// Define für asciitest
+//#define TEST
+#define CLRSCR "\27[2J" // FIXME
+
+
+char screen[XSIZE*YSIZE]; 
+#define SCR_AT(x,y) screen[(x)+(y)*XSIZE]
+
+char font[256*8] = {
+#include "font.h"
+};
+
+#define FONTBIT(c, x, y) (font[(c)*8+(y)] & (1<<(7-(x))))
+
+void writescreen() {
+#ifdef TEST
+    int x, y;
+    //printf(CLRSCR);
+    for (y=0; y<YSIZE; y++) {
+        for (x=0; x<XSIZE; x++) {
+            if (SCR_AT(x,y)) 
+                printf("#");
+            else
+                printf(" ");
+        }
+    }
+
+#else    
+    char buf[XSIZE*YSIZE/8];
+    int bank, x, pos, bit;
+    
+    int devfp;
+
+    #define SCR_SHIFT(x, bank, bit) (SCR_AT(x, (bank)*8 + bit) << bit)
+    
+    pos=0;
+    for (bank = 0; bank < BANKS; bank++) {
+        for (x = 0; x < XSIZE; x++) {
+            buf[pos]=0;
+            for (bit=0; bit < 8; bit++) {
+                buf[pos] |= SCR_SHIFT(x, bank, bit);
+            }
+            pos++;
+        }
+    }
+
+    devfp=open(DEVICE, O_WRONLY);
+    write(devfp, &buf, XSIZE*YSIZE/8);
+    close(devfp);
+
+#endif
+}
+
+void clearscreen() {
+    bzero(&screen, XSIZE*YSIZE);
+}
+
+void setpixel(int x, int y) {
+    if (x>XSIZE || x<0 || y>YSIZE || y<0)
+        return;
+
+    SCR_AT(x, y)=1;
+}
+
+void unsetpixel(int x, int y) {
+    if (x>XSIZE || x<0 || y>YSIZE || y<0)
+        return;
+
+    SCR_AT(x, y)=1;
+}
+
+void setblock(int x1, int y1, int x2, int y2) {
+    int x,y;
+    if (x1>x2 || y1>y2)
+        return;
+    if (x1<0) x1=0;
+    if (x2>=XSIZE) x2=XSIZE-1;
+    if (y1<0) y1=0;
+    if (y2>=YSIZE) y2=YSIZE-1;
+
+    for (y=y1; y<=y2; y++) {
+        for (x=x1; x<=x2; x++) {
+            SCR_AT(x, y)=1;
+        }
+    }
+}
+
+void putcharacter(char blah, int x, int y, int zoom) {
+    int bx, by, zoomx, zoomy;
+
+    if (x > XSIZE || x + zoom * 8 < 0 || y > XSIZE || y + zoom * 8 < 0)
+        return;
+
+    for (by=0; by<8; by++) {
+        for (bx=0; bx<8; bx++) {
+            if (FONTBIT(blah, bx, by)) {
+                for (zoomy=0; zoomy<zoom; zoomy++) {
+                    for (zoomx=0; zoomx<zoom; zoomx++) {
+                        setpixel(x+zoom*bx+zoomx, y+zoom*by+zoomy);
+                    }
+                }
+            }
+        }
+    }
+}
+
+void putstring(char *string, int x, int y, int zoom, int spacing) {
+    int i;
+    for (i=0; i<strlen(string); i++) {
+        putcharacter(string[i], x + i * ((zoom*8) + spacing), y, zoom);
+    }
+}
+
+int stringwidth(char *string, int zoom, int spacing) {
+    return (zoom*8+spacing)*strlen(string);
+}
+
+void scrollup(int lines) {
+    if (lines == 0)
+        return;
+    if (lines>=YSIZE) 
+        lines=YSIZE-1;
+    memmove(&SCR_AT(0,0), &SCR_AT(0, lines), (YSIZE-lines+1)*XSIZE);
+    bzero(&SCR_AT(0, YSIZE-lines), lines*XSIZE);
+}
diff -Nru gnuboy-1.0.3/sys/x11/output.h gnuboy-1.0.3-lcd/sys/x11/output.h
--- gnuboy-1.0.3/sys/x11/output.h	Thu Jan  1 01:00:00 1970
+++ gnuboy-1.0.3-lcd/sys/x11/output.h	Sun Dec 30 02:09:07 2001
@@ -0,0 +1,14 @@
+#include "lcd.h"
+
+void writescreen();
+void clearscreen();
+void setpixel(int x, int y);
+#define putpixel(x, y) setpixel((x), (y))
+void unsetpixel(int x, int y);
+void putcharacter(char blah, int x, int y, int zoom);
+void putstring(char *string, int x, int y, int zoom, int spacing);
+int  stringwidth(char *string, int zoom, int spacing);
+void setblock(int x1, int y1, int x2, int y2);
+void scrollup(int lines);
+
+
diff -Nru gnuboy-1.0.3/sys/x11/xlib.c gnuboy-1.0.3-lcd/sys/x11/xlib.c
--- gnuboy-1.0.3/sys/x11/xlib.c	Mon Sep 24 03:01:10 2001
+++ gnuboy-1.0.3-lcd/sys/x11/xlib.c	Sun Dec 30 02:09:07 2001
@@ -5,6 +5,11 @@
  * dist under gnu gpl
  */
 
+#include "lcd.h"
+#include "output.h"
+
+void lcd_display_ximage();
+
 #ifdef HAVE_CONFIG_H
 #include "config.h"
 #if defined(HAVE_LIBXEXT) && defined(HAVE_X11_EXTENSIONS_XSHM_H) \
@@ -516,9 +521,49 @@
 		XPutImage(x_display, x_win, x_gc, x_image,
 			  0, 0, 0, 0, x_width, x_height);
 	}
+
+	lcd_display_ximage();
+
 }
 
 
+void lcd_display_ximage()
+{
+    static int dither=0;
+    static int threshold=20;
+    static int counter;
+    int limit = 0;
+    int offset = 160*80;
+    float x, y;
+    int pixel;
+    int height, width;
+    int bpp;
+
+    if (++counter < 4) return;
+    counter = 0;
+    height = x_image->height;
+    width = x_image->width;
+    bpp = x_image->depth;
+			    
+    dither=1-dither;
+    clearscreen();
+    pixel=0;
+    for (x=0; x< XSIZE; x++) {
+       for (y=0; y< YSIZE; y++) {
+           int c=((short *) x_image->data)[offset+((int)(y*(height-80)/YSIZE) * width + (int)(x+30))];
+	   c &= 63;
+	   /* printf("%d ", c); */
+          /* limit = threshold + ((int) (x+y)%3 ) * 10 + dither * 5; */
+
+       if (c < threshold) {
+	   pixel++;        
+	   setpixel(x,y);
+       }
+      }
+       /* printf("\n"); */
+    }
 
+    writescreen();
+}
 
 
